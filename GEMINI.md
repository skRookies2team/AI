# AI 기반 인터랙티브 스토리 엔진

## 프로젝트 개요

이 프로젝트는 주어진 소설 텍스트를 상호작용 가능한 분기형 내러티브로 변환하는 AI 기반 스토리 생성 엔진입니다. Python으로 제작되었으며, 목표 달성을 위해 여러 강력한 기술들을 활용합니다. 핵심적으로 OpenAI의 거대 언어 모델(LLM)을 LangChain 및 LangGraph 라이브러리와 함께 사용하여 스토리 요소를 생성하며, 전체 시스템은 FastAPI 프레임워크를 통해 웹 서비스로 제공됩니다.

스토리 생성 과정은 다음과 같은 주요 단계로 나뉩니다:
1.  **소설 분석**: 엔진은 입력된 소설을 분석하여 요약, 주요 인물 목록, "게이지" 시스템을 추출합니다. 게이지 시스템은 이야기의 상태를 추적하고 플레이어의 선택에 따라 영향을 받는 지표 집합입니다.
2.  **에피소드 생성**: 이야기는 각각 자체적인 분기 서사 트리를 가진 여러 에피소드로 나뉩니다.
3.  **분기형 서사**: 각 에피소드에 대해 LangGraph를 사용하여 스토리 노드 트리를 생성합니다. 각 노드는 플레이어에게 이야기의 다른 경로로 이어지는 선택지를 제공합니다.
4.  **동적 엔딩**: 이야기는 에피소드별 엔딩과 게임 플레이 내내 누적된 게이지 값에 따라 결정되는 최종 엔딩 세트를 모두 갖추고 있습니다.
5.  **내보내기**: 생성된 스토리는 게임 엔진에서 사용하기 적합한 JSON을 포함한 다양한 형식으로 내보낼 수 있습니다.

이 프로젝트는 또한 AWS S3와 상호작용하여 스토리 데이터를 저장하고 검색하는 기능을 포함하고 있어, 많은 수의 스토리를 관리하기 위한 확장 가능한 솔루션입니다.

## 빌드 및 실행

### 사전 요구 사항
*   Python 3.8 이상
*   OpenAI API 키

### 설정

1.  **가상 환경 생성:**
    ```bash
    python -m venv venv
    ```

2.  **가상 환경 활성화:**
    *   Windows의 경우:
        ```bash
        .\venv\Scripts\activate
        ```
    *   macOS/Linux의 경우:
        ```bash
        source venv/bin/activate
        ```

3.  **필요한 종속성 설치:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **OpenAI API 키 설정:**
    프로젝트의 루트 디렉토리에 `.env` 파일을 생성하고 OpenAI API 키를 추가합니다:
    ```
    OPENAI_API_KEY="your-api-key-here"
    ```

### 애플리케이션 실행

이 프로젝트는 두 가지 방식으로 실행할 수 있습니다: 로컬 파일에서 스토리를 생성하는 커맨드 라인 애플리케이션 또는 스토리 생성을 위한 API 세트를 제공하는 웹 서버.

#### 커맨드 라인 애플리케이션으로 실행

로컬 텍스트 파일에서 스토리를 생성하려면 `main.py` 스크립트를 실행합니다:

```bash
python main.py
```

스크립트는 소설 파일 경로를 입력하라는 메시지를 표시하고 스토리 생성 과정을 안내합니다.

#### 웹 서버로 실행

FastAPI 웹 서버를 시작하려면 `api.py` 스크립트를 실행합니다:
```bash
uvicorn api:app --reload
```
서버는 `http://127.0.0.1:8000`에서 사용할 수 있습니다. `http://127.0.0.1:8000/docs`에서 제공되는 Swagger UI와 같은 도구를 사용하여 API와 상호작용할 수 있습니다.

## 개발 컨벤션

*   **모듈식 아키텍처**: 프로젝트는 메인 애플리케이션 레이어(`main.py`, `api.py`)와 핵심 로직 패키지(`storyengine_pkg`)로 구조화되어 있습니다. 이러한 관심사 분리는 코드베이스를 유지 관리하고 확장하기 쉽게 만듭니다.
*   **비동기 프로그래밍**: 이 프로젝트는 Python의 `asyncio` 라이브러리를 광범위하게 사용하여 LLM에 대한 API 호출 및 S3와의 상호작용과 같은 I/O 바운드 작업을 논블로킹 방식으로 처리합니다.
*   **타입 힌팅**: 코드베이스는 전체적으로 타입 힌트가 적용되어 코드 가독성을 높이고 정적 분석을 가능하게 합니다.
*   **종속성 관리**: 프로젝트 종속성은 Python 프로젝트의 표준인 `requirements.txt` 파일을 통해 관리됩니다.
*   **구성**: 프로젝트는 API 키와 같은 구성 변수를 관리하기 위해 `.env` 파일을 사용하며, 이는 민감한 정보를 코드베이스에서 분리하는 일반적인 관행입니다.
*   **제어 흐름을 위한 LangGraph**: 스토리 생성 과정은 LangGraph 라이브러리를 사용하여 상태 그래프로 모델링됩니다. 이를 통해 생성 워크플로우를 명확하고 유연하게 정의할 수 있습니다.


대답은 무조건 한글로 할 것
